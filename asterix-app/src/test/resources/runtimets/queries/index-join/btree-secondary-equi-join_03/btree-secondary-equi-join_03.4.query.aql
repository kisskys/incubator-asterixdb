/*
 * Description    : Equi joins two datasets, DBLP and CSX, based on their authors.
 *                  Both datasets have a secondary btree index on authors. So, given the 'indexnl' hint
 *                  we expect the join to be transformed into an indexed nested-loop join.
 *                  (outer relation: the first relation described in the for-loop, inner relation: the other relation)
 * Success        : Yes
 */

use dataverse test;

for $a in dataset('DBLP')
for $b in dataset('CSX')
where $a.authors /*+ indexnl */ = $b.authors
order by $a.id, $b.id
return {"aid": $a.id, "bid": $b.id, "authors": $a.authors}
